<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}{% endblock %} | Easy Access</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 via-white to-purple-100 min-h-screen flex flex-col">

  <!-- Navbar -->
  <nav class="w-full bg-teal-600 shadow-md">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center py-4">
        
        <!-- Logo -->
        <div class="flex items-center flex-shrink-0">
          <a href="/" class="text-white font-bold text-xl">Easy Access</a>
        </div>

        <!-- Hamburger Button (Mobile) -->
        <div class="md:hidden">
          <button id="menu-toggle" class="text-white focus:outline-none">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>
        </div>

        <!-- Desktop Menu -->
        <div class="hidden md:flex items-center space-x-4 text-white">
          <form method="get" action="{% url 'search' %}" class="flex items-center">
            <input
              type="search"
              name="query"
              placeholder="Search"
              class="rounded-l-md px-3 py-1 text-gray-800 focus:outline-none"
            />
            <button
              type="submit"
              class="bg-teal-700 text-white px-3 py-1 rounded-r-md hover:bg-teal-800 transition"
            >
              <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 
                     5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
              </svg>
            </button>
          </form>

          <a href="#" class="hover:underline">About</a>

          {% if request.user.is_authenticated %}
            {% if request.user.userprofile.is_vendor %}
            <a href="{% url 'mystore' %}" class="py-2 px-4 bg-teal-800 rounded-xl hover:bg-teal-900 transition">
              My Store
            </a>
            {% endif %}

            <a href="{% url 'cart_view' %}" class="flex py-2 px-4 bg-teal-800 rounded-xl hover:bg-teal-900 transition">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                class="w-6 h-6 mr-1">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 
                     1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218
                     c1.121-2.3 2.1-4.684 2.924-7.138a60.114 
                     60.114 0 0 0-16.536-1.84M7.5 
                     14.25 5.106 5.272M6 20.25a.75.75 0 
                     1 1-1.5 0 .75.75 0 0 1 1.5 
                     0Zm12.75 0a.75.75 0 1 1-1.5 0 
                     .75.75 0 0 1 1.5 0Z" />
              </svg>
              ({{ cart|length }})
            </a>

            <a href="{% url 'myaccount' %}" class="py-2 px-4 bg-teal-800 rounded-xl hover:bg-teal-900 transition">My Account</a>
            <a href="{% url 'logout' %}" class="hover:underline">Logout</a>
          {% else %}
            <a href="{% url 'login' %}" class="hover:underline">Login</a>
            <a href="{% url 'signup' %}" class="hover:underline">Sign up</a>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="md:hidden hidden px-4 pb-4 space-y-3 bg-teal-700 text-white">
      <form method="get" action="{% url 'search' %}" class="flex items-center">
        <input
          type="search"
          name="query"
          placeholder="Search"
          class="w-full rounded-l-md px-3 py-2 text-gray-800 focus:outline-none"
        />
        <button
          type="submit"
          class="bg-teal-800 text-white px-3 py-2 rounded-r-md hover:bg-teal-900 transition"
        >
          üîç
        </button>
      </form>

      <a href="#" class="block hover:underline">About</a>
      {% if request.user.is_authenticated %}
        {% if request.user.userprofile.is_vendor %}
        <a href="{% url 'mystore' %}" class="block py-2 px-4 bg-teal-800 rounded-xl hover:bg-teal-900 transition">My Store</a>
        {% endif %}
        <a href="{% url 'cart_view' %}" class="block py-2 px-4 bg-teal-800 rounded-xl hover:bg-teal-900 transition">(Cart: {{ cart|length }})</a>
        <a href="{% url 'myaccount' %}" class="block py-2 px-4 bg-teal-800 rounded-xl hover:bg-teal-900 transition">My Account</a>
        <a href="{% url 'logout' %}" class="block hover:underline">Logout</a>
      {% else %}
        <a href="{% url 'login' %}" class="block hover:underline">Login</a>
        <a href="{% url 'signup' %}" class="block hover:underline">Sign up</a>
      {% endif %}
    </div>
  </nav>

  <!-- Main Content -->
  <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 py-8 w-full">
    {% block content %}
    {% endblock %}
  </main>

  <!-- Script for menu toggle -->
  <script>
    const toggleBtn = document.getElementById('menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    toggleBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });
  </script>
</body>
</html>
